{% extends 'base.html' %}
{% load template_tags %}
{% block content %}
<div class="container">
<div class="row mt-3 mb-3">
    <div class="col-lg-10 mx-auto">
        <div class="card bg-light">
            <div class="card-body">
                <div class="container">
                    <form action="{% url 'search_room' %}" method="get">
                        <div class="row  ">
                            <div class="col-lg-5 col-6 mt-1 mb-1"><input type="text"  id="state"  name="state" placeholder="State" class="form-control" required></div>
                            <div class="col-lg-5 col-6 mt-1 mb-1"><input type="text" id="city" name="city" placeholder="City" class="form-control" required></div>
                            <div class="col-lg-2 col-6 mt-1 mb-1 mx-auto"><input type="submit" value="search" class="btn btn-outline-success btn-block"></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-12 mt-3">
        <div class="row">
            <div class="col-lg-3">
                <div class="card">
                    <div class="card-header">Room Types</div>
                       <div class="list-group small">
                           <a href="" class="list-group-item list-group-item-action rounded-0">All Rooms</a>
                           {% for t in type %}
                           <a href="" class="list-group-item list-group-item-action rounded-0">{{ t.rt_title }}</a>
                           {% empty %}
                               <span class="disabled">Empty</span>
                           {% endfor %}
                       </div>
                </div>
            </div>
            <div class="col-lg-9">
            {% if house.count == 0 %}
                <h6 class="text-danger ml-3 mb-3">No any rooms found in your area!</h6>
            {% else %}
                <h6 class="text-success ml-3 mb-3">({{ house.count }}) house found in your area.</h6>
            {% endif %}
                {% for h in house %}

                    <div class="card mt-2">
                        <div class="card-body small">
                            <div class="row">
                                <div class="col-lg-5">
                                    <img src="{{ h.ro_house_image.url }}" alt="" class=" w-100" height="200px">
                                </div>
                                <div class="col-lg-7">
                                    <h6 class="text-center text-uppercase">{{ h.ro_house }}</h6>
                                    <p class="text-center">{{ h.ro_street }} ,{{ h.city }} ,{{ h.state }}</p>
                                    <p class="text-info">Owner: {{ h.user_id.first_name }} {{ h.user_id.last_name }}</p>
                                    <p class="text-info">Contact: {{ h.ro_contact }}</p>
                                    <p class="text-info">Email: {{ h.user_id.email }}</p>
                                    <div class="form-inline">
                                      {% if h.user_id|room_count == 0 %}
                                          <div class="badge badge-danger p-1">No any Rooms</div>
                                      {% else %}
                                        <div class="badge badge-primary p-1">{{ h.user_id|room_count }} Rooms</div>
                                      {% endif %}
                                      <a href="{% url 'house_view' h.user_id.username %}" class="btn btn-success ml-auto">View Rooms</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div class="card-footer">
                        <div class="row no-gutters">
                            {% for t in room_type %}
                                <div class="col-lg-2">
                                    <div class="alert alert-primary small m-1 p-1 text-center text-muted" role="alert">{{ t.r_type }}</div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}